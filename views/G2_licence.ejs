<!DOCTYPE html>
<html lang="en">
  <%- include ('layout/head'); -%>
  <body>
    <!-- Navigation-->
    <%- include ('layout/navigation'); -%>
    <!-- Page Header-->
    <header
      class="masthead"
      style="background-image: url('assets/img/home-bg.jpeg')"
    >
      <div class="container position-relative px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
          <div class="col-md-10 col-lg-8 col-xl-7">
            <div class="site-heading">
              <h1>G2 Test</h1>
              <span class="subheading">DriveTest Booking Kiosk</span>
            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- Main Content-->
    <div class="container px-4 px-lg-5 mb-5">
      <div class="row gx-4 gx-lg-5 justify-content-center">
        <div class="col-md-10 col-lg-8 col-xl-7">
          <form class="form_licence" method="post" action="/update/user">
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input
                type="text"
                class="form-control"
                id="firstName"
                aria-describedby="firstName"
                placeholder="Enter your first name"
                name="firstName"
                value="<%= loggInUser.firstname %>"
              />
            </div>
            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input
                type="text"
                class="form-control"
                id="lastName"
                aria-describedby="lastName"
                placeholder="Enter your last name"
                name="lastName"
                value="<%= loggInUser.lastname%>"
              />
            </div>
            <div class="form-group">
              <label for="licenceNumber">Licence Number</label>
              <input
                type="text"
                class="form-control"
                id="licenceNumber"
                aria-describedby="licenceNumber"
                placeholder="Enter your Licence number"
                name="licenceNumber"
                value="<%= loggInUser.licenceNumber%>"
              />
            </div>

            <div class="form-group">
              <label for="age">Age</label>
              <input
                type="text"
                class="form-control"
                id="age"
                aria-describedby="age"
                placeholder="Enter your age"
                name="age"
                value="<%= loggInUser.age %>"
              />
            </div>
            <div class="form-group">
              <label for="dob">DOB</label>
              <input
                type="text"
                class="form-control"
                id="dob"
                aria-describedby="dob"
                placeholder="Enter your date of birth"
                name="dob"
                value="<%= loggInUser.dob%>"
              />
            </div>
            <div class="row">
              <h3>Car Details</h3>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="make">make</label>
                  <input
                    type="text"
                    class="form-control"
                    id="make"
                    aria-describedby="make"
                    placeholder="Enter your make"
                    name="make"
                    value="<%= loggInUser.carDetails.make %>"
                  />
                </div>
                <div class="form-group">
                  <label for="model">model</label>
                  <input
                    type="text"
                    class="form-control"
                    id="model"
                    aria-describedby="model"
                    placeholder="Enter your car model number"
                    name="model"
                    value="<%= loggInUser.carDetails.model %>"
                  />
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="year">Year</label>
                  <input
                    type="text"
                    class="form-control"
                    id="year"
                    aria-describedby="year"
                    placeholder="Enter your car year"
                    name="year"
                    value="<%= loggInUser.carDetails.year%>"
                  />
                </div>

                <div class="form-group">
                  <label for="platName">plat number</label>
                  <input
                    type="text"
                    class="form-control"
                    id="platName"
                    aria-describedby="platName"
                    placeholder="Enter your plat number"
                    name="platName"
                    value="<%= loggInUser.carDetails.platnumber%>"
                  />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <button type="submit" class="btn btn-primary mt-4">
                  Submit
                </button>
              </div>
            </div>
          </form>
          <div class="appointment-booking">
            <!-- <h3>Remaining time slot that you have to book..!</h3> -->
            <form class="form_licence" action="/G2_licence" method="get">
              <div class="form-group">
                <label for="appointment_date">Select your date</label>
                <input
                  type="date"
                  class="form-control"
                  id="appointment_date"
                  aria-describedby="appointment_date"
                  placeholder="Select your date"
                  name="appointment_date"
                  value="appointment_date"
                />
                <button type="submit" class="btn btn-primary mt-4">
                  Submit
                </button>
              </div>
            </form>
            
<% if(appointment_list.length === 0) { %>
  <div class="form-group text-center">
    <h6>Sorry you don't have any slots for this date !!</h6>
  </div>
  <% } else { %>
    <form class="form_licence mt-4" method="post" action="/select_slot">
      <div class="form-group">
        <label for="appointment_date">Select your time slot</label>
        <p>Date: <%= date %></p>
        <div class="app-time mt-2">
          <div class="app-check">
            <% for(let i = 0; i<appointment_list.length; i++) { %>
            <input
              type="radio"
              class="option-input radio"
              name="slots"
              value="<%= appointment_list[i]._id %>"
            />
            <div class="app-border">
              <label class="app-label"><%= appointment_list[i].time %></label>
            </div>
            <% } %>
          </div>
        
          <div>
        </div>
        <button type="submit" class="btn btn-primary mt-4">
          Submit
        </button>
      </div>
    </form>
  <% } %> 
          </div>
        </div>
      </div>
    </div>
    <!-- Footer-->
    <%- include ('layout/footer'); -%>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
  </body>
</html>
